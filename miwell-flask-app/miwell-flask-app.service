[Unit]
Description=Run the MiWell flask app as a systemd service with gunicorn.

[Service]
User=miwell-admin

# Define the working directory and set the environmental file.

WorkingDirectory=/opt/miwell-flask-app
EnvironmentFile=/opt/miwell-flask-app/.env

Environment="PATH=/opt/miwell-flask-app/venv/bin"

ExecStart=/bin/sh \
    -c 'cd /opt/miwell-flask-app && \
    . ./venv/bin/activate && \
    gunicorn --workers=4 --bind=0.0.0.0:5000 wsgi:app'




[Install]
WantedBy=multi-user.target

